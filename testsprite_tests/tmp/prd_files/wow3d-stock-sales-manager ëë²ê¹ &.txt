🛠️ wow3d-stock-sales-manager 디버깅 & 점검 리스트
1. 🔐 보안 및 멀티테넌트 격리 점검 (최우선 순위)
가장 치명적인 데이터 유출을 막기 위해 반드시 확인해야 합니다.

API 엔드포인트 쿼리 전수 조사: src/routes/*.ts 내의 모든 DB 쿼리에 WHERE tenant_id = ? 조건이 빠짐없이 포함되어 있는지 확인해야 합니다.
대상 파일: 
products.ts
, 
sales.ts
, 
customers.ts
, 
outbound.ts
 등
체크 포인트: c.get('tenantId') 값을 쿼리에 올바르게 바인딩하고 있는가?
미들웨어 작동 확인 (
src/middleware/tenant.ts
):
토큰이 없거나 유효하지 않을 때 401 에러를 정확히 반환하는가?
SUPER_ADMIN 권한을 가진 사용자가 X-Tenant-ID 헤더를 통해 다른 조직으로 위장(Impersonation) 접속 시 권한 체크가 올바른가?
2. 🚦 프론트엔드/백엔드 라우팅 및 리소스 충돌
현재 프로젝트 구조상 라우팅 혼선이 발생할 수 있는 지점입니다.

로그인 페이지 중복 로직:
src/index.tsx
에서 서빙하는 로그인 HTML/JS 코드와 
public/login.html
 파일이 존재합니다. 실제 운영 환경에서 어느 쪽이 사용되는지 명확히 하고, 불필요한 파일은 제거하거나 싱크를 맞춰야 합니다.
거대 파일(
app.js
) 모듈화 필요성:
public/static/app.js
 파일이 약 377KB로 매우 큽니다. 이 파일 내에서 API 호출 URL이 하드코딩되어 있는지, 전역 변수 오염이 없는지 디버깅이 필요합니다.
증상: 특정 페이지 로드 시 콘솔 에러, 뒤로 가기 시 상태 꼬임 현상 점검.
3. 💾 데이터베이스 및 마이그레이션 정합성
최근 
tenant
 관련 마이그레이션이 다수 추가되었습니다.

스키마 적용 상태 확인: 로컬 D1 DB와 마이그레이션 파일(migrations/*.sql)의 상태가 일치하는지 확인해야 합니다.
특히 
0008_add_tenants.sql
 이후의 테이블 변경 사항(FK 제약조건 등)이 실제 DB에 반영되었는지 점검.
기존 데이터 마이그레이션: 기존 단일 사용자 모드일 때 생성된 데이터들에 tenant_id가 올바르게 할당되었는지(보통 Default Tenant ID로 매핑) 확인이 필요합니다.
4. 📦 주요 기능별 워크플로우 테스트
최근 작업 내역을 바탕으로 한 기능 테스트 항목입니다.

슈퍼 어드민(Super Admin) 기능:
테넌트 생성/수정/삭제가 정상적으로 DB에 반영되는가?
생성된 테넌트의 데이터가 다른 테넌트에서 보이지 않는지 교차 검증.
출고(Outbound) 프로세스:
PENDING -> PICKING -> PACKING -> SHIPPED 상태 변경이 순서대로만 작동하는지, 비정상적인 점프(예: PENDING -> SHIPPED)가 방지되어 있는지 확인.
재고(Stock) 수량 동기화:
판매(Sales) 또는 출고(Outbound) 발생 시 products 테이블의 재고 수량이 정확히 차감되는지 트랜잭션 단위 점검.
5. 🚀 인프라 및 배포 환경
환경 변수(
wrangler.jsonc
 vs .env): JWT_SECRET 등 민감한 키값이 로컬과 배포 환경(Cloudflare)에서 올바르게 설정되어 있는지 확인.
